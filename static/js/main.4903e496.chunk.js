(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){"use strict";a.r(t);var n,r,l=a(0),c=a.n(l),i=a(9),u=a.n(i),o=a(26),s={RELOAD_STATE:"RELOAD_STATE",CREATE_ITEM:"CREATE_ITEM",REMOVE_ITEM:"REMOVE_ITEM",EDIT_ITEM:"EDIT_ITEM",MOVE_ITEM:"MOVE_ITEM",SET_VALUES:"SET_VALUES",SET_CHECKED:"SET_CHECKED"},m=function(e){return function(t,a){if(e.hasOwnProperty(a.type)){for(var n=arguments.length,r=new Array(n>2?n-2:0),l=2;l<n;l++)r[l-2]=arguments[l];return e[a.type].apply(e,[t,a].concat(r))}return t}},f=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var l={type:e};return a.forEach(function(e,t){l[e]=n[t]}),l}},d=f(s.RELOAD_STATE),E=f(s.CREATE_ITEM,"item"),v=f(s.REMOVE_ITEM,"index","id"),b=f(s.EDIT_ITEM,"item"),h=f(s.MOVE_ITEM,"index"),g=f(s.SET_VALUES,"values"),O=f(s.SET_CHECKED,"value","checked"),j=a(11),y=a(19),p=a(39),k={name:"\u540d\u79f0",qty:"\u6570\u91cf",str:"\u706b\u529b",tor:"\u9c7c\u96f7",def:"\u88c5\u7532",air:"\u5bf9\u7a7a",fuel:"\u6cb9",ammo:"\u5f39",steel:"\u94a2",al:"\u94dd"},C=function(e){try{var t=localStorage.getItem(e);if(t)return JSON.parse(t)}catch(a){console.log(a)}return null},T=function(e){return k[e]||e},w=function(e){var t=e.list,a=e.stats,n=e.values,r={};return t.slice(0,10).forEach(function(e){var t=a[e].qty;if("0"!==t&&0!==t){""===t&&(t=20),t=1*t>20?20:1*t;var l=Object(y.a)({},a[e],{qty:t,value:I(n,a[e].value)});r[e]=l}}),r},I=function(e,t){var a=0;for(var n in t)a+=e[n]*t[n];return a},S=function(e,t){var a=e.sack,n=e.checkList,r=Object(j.a)(n,2),l=r[0],c=r[1],i=0,u=0;return Object.keys(t).forEach(function(e){var a=t[e],n=a.weight,r=a.qty;i+=r*n[l],u+=r*n[c]}),{filled:!(i<a[0]||u<a[1]),reverseSack:[i-a[0],u-a[1]]}},_=function e(t){if(t.length>0){for(var a=t[0],n=t.slice(1),r=new Array(a+1),l=0;l<=a;l++)r[l]=e(n);return r}return 0},M=function(e,t,a,n,r,l){for(var c=1,i=l.qty;c<i;)N(e,t,a,n,r,l,c),i-=c,c*=2;N(e,t,a,n,r,l,i)},N=function(e,t,a,n,r,l){for(var c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,i=l.weight,u=l.value,o=Object(j.a)(t,2),s=o[0],m=o[1],f=i[s],d=i[m],E=e[0];E>=c*f;E--)for(var v=e[1];v>=c*d;v--){var b=a[E-c*f][v-c*d]+c*u;b>a[E][v]&&(a[E][v]=b,n[r][E][v]=1)}},x=function(e,t,a,n){for(var r=Object(j.a)(e,2),l=r[0],c=r[1],i=Object.keys(a),u=i.length,o=Object(j.a)(t,2),s=o[0],m=o[1];u>0&&l>0&&c>0;){var f=a[i[u-1]],d=f.weight;1===n[u][l][c]&&f.qty?(l-=d[s],c-=d[m],f.qty-=1):u--}},q=function(e){var t={};return Object.keys(e).forEach(function(a){0!==e[a].qty&&(t[a]=e[a])}),t},A=C("warship-girl")||{values:[1,1,1,1],checked:{str:!0,tor:!1,def:!1,air:!0},list:["11cbf574-4dde-41e1-ae97-ce718ba58589","9f6d01bc-1e08-4664-aef6-f5da3e109ba6","9f5dcdcd-58a6-432f-8397-43ebb03ca1d0","471d9acd-bf12-408d-bc2e-0937734ac97f","a26e2d92-70b6-46a9-8414-14af4a598b6f","bf08d669-387c-4abb-bea6-6cceffc661ee"],stats:{"9f5dcdcd-58a6-432f-8397-43ebb03ca1d0":{name:"\u53cd\u51fb",qty:"20",weight:["63","0","56","24"],value:["40","50","40",""]},"9f6d01bc-1e08-4664-aef6-f5da3e109ba6":{name:"\u58f0\u671b",qty:"20",weight:["63","0","56","42"],value:["40","50","40",""]},"11cbf574-4dde-41e1-ae97-ce718ba58589":{name:"\u79d1\u7f57\u62c9\u591a",qty:"20",weight:["80","0","71","23"],value:["50","60","60",""]},"471d9acd-bf12-408d-bc2e-0937734ac97f":{name:"\u5e03\u9c81\u514b\u6797",qty:"20",weight:["16","0","14","43"],value:["10","16","10",""]},"a26e2d92-70b6-46a9-8414-14af4a598b6f":{name:"\u6797\u4ed9",qty:"20",weight:["12","10","7","14"],value:["5","8","5",""]},"bf08d669-387c-4abb-bea6-6cceffc661ee":{name:"\u5965\u9a6c\u54c8",qty:"20",weight:["10","18","8","20"],value:["5","8","5","0"]}}},D=a(42),R=a(67),L=a(14),V=a(68),P=a.n(V),H=m((n={},Object(L.a)(n,s.CREATE_ITEM,function(e,t){return[].concat(Object(p.a)(e),[t.item.id])}),Object(L.a)(n,s.REMOVE_ITEM,function(e,t){var a=t.index,n=e.length;return 0===a?e.slice(1):a===n-1?e.slice(0,n-1):[].concat(Object(p.a)(e.slice(0,a)),Object(p.a)(e.slice(a+1)))}),Object(L.a)(n,s.MOVE_ITEM,function(e,t){var a=t.index,n=a.oldIndex,r=a.newIndex;return n===r?e:P()(e,n,r)}),n)),K=a(44);function J(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var U=function(e,t){var a=t.item,n=a.id,r=Object(K.a)(a,["id"]);return Object(y.a)({},e,Object(L.a)({},n,r))},F=m((r={},Object(L.a)(r,s.CREATE_ITEM,U),Object(L.a)(r,s.REMOVE_ITEM,function(e,t){var a=t.id;e[a];return Object(K.a)(e,[a].map(J))}),Object(L.a)(r,s.EDIT_ITEM,U),r)),z=function(e,t){return t.type===s.SET_VALUES?t.values:e},B=function(e,t){return t.type===s.SET_CHECKED?Object(y.a)({},e,Object(L.a)({},t.value,t.checked)):e},W=function(e,t){if(t.type===s.RELOAD_STATE)return C("warship-girl")||A;var a=e.list,n=e.stats,r=e.values,l=e.checked;return{list:H(a,t),stats:F(n,t),values:z(r,t),checked:B(l,t)}},G=Object(D.c)(W,A,Object(D.a)(R.a)),Q=["str","tor","def","air"],X=["fuel","ammo","steel","al"],Y=a(132),Z=a(134),$=a(135),ee=a(136),te=a(137),ae={load:c.a.createElement(Y.a,null),del:c.a.createElement(Z.a,null),save:c.a.createElement($.a,null),add:c.a.createElement(ee.a,null)},ne=Object(l.memo)(function(e){var t=e.classes,a=e.btns,n=e.onClick;return c.a.createElement("div",{className:"flex fluid space-between"},a.map(function(e){return c.a.createElement(te.a,{key:e,variant:"contained",className:t,onClick:n(e)},ae[e])}))});ne.defaultProps={classes:"col-4"};var re=ne,le=a(146),ce=Object(l.memo)(function(e){var t=e.label,a=e.value,n=e.onChange;return c.a.createElement(le.a,{type:"number",variant:"filled",label:T(t),value:a,onChange:n,InputProps:{name:t,onKeyPress:function(e){-1!==["+","-","e"].indexOf(e.key)&&e.preventDefault()}}})}),ie=Object(l.memo)(function(e){var t=e.values,a=e.handleValues,n=function(e){var n=e.target,r=n.name,l=n.value,c=X.indexOf(r);if(-1!==c){var i=t.slice();i[c]=l,a(i)}};return c.a.createElement(l.Fragment,null,"\u8d44\u6e90\u4ef7\u503c\u6743\u91cd",c.a.createElement("div",{className:"wrap-box gutter-bottom"},X.map(function(e,a){return c.a.createElement(ce,{key:e,label:e,value:t[a],onChange:n})})))}),ue=a(138),oe=a(139),se=a(141),me=a(150),fe=a(147),de=Object(l.memo)(function(e){var t=e.checked,a=e.handleCheck,n=Object(l.useState)(function(){return Q.reduce(function(e,a){return e+(t[a]?1:0)},0)}),r=Object(j.a)(n,2),i=r[0],u=r[1],o=function(e){var t=e.target,n=t.value,r=t.checked;2===i&&r?e.preventDefault():(a(n,r),u(i+(r?1:-1)))};return c.a.createElement(ue.a,{required:!0,component:"fieldset",className:"col-2"},c.a.createElement(oe.a,{component:"legend"},"\u9009\u62e9\u81f3\u591a\u4e24\u9879"),c.a.createElement(se.a,null,Q.map(function(e){return c.a.createElement(me.a,{key:e,control:c.a.createElement(fe.a,{checked:t[e],value:e,onChange:o}),label:T(e)})})))}),Ee=a(41),ve=a(55),be=a(25),he=Object(l.memo)(function(e){var t=e.data,a=e.index,n=e.style,r=t.list,l=t.checkList,i=r[a],u=t.data[i],o=u.name,s=u.value,m=u.weight,f=u.qty,d=Object(j.a)(l,2),E=d[0],v=d[1];return c.a.createElement("div",{className:"flex list-item",style:n},c.a.createElement("div",{className:"list-item-name ellipsis"},o),c.a.createElement("div",null,s),c.a.createElement("div",null,m[E]),c.a.createElement("div",null,m[v]),c.a.createElement("div",null,f))},Ee.b),ge=Object(be.a)(function(e,t,a){return{list:e,data:t,checkList:a}}),Oe=Object(l.memo)(function(e){var t=e.data,a=e.checkList,n=Object.keys(t).sort(function(e,a){return t[a].value-t[e].value}),r=ge(n,t,a),i=0,u=0,o=0,s=0,m=Object(j.a)(a,2),f=m[0],d=m[1];return 0!==n.length&&n.forEach(function(e){var a=t[e],n=a.weight,r=a.value,l=a.qty;i+=l*n[f],u+=l*n[d],o+=l*r,s+=l}),c.a.createElement(l.Fragment,null,0!==n.length&&c.a.createElement(l.Fragment,null,c.a.createElement("div",{className:"flex list-item"},c.a.createElement("div",{className:"list-item-name ellipsis"},"NAME"),c.a.createElement("div",null,"\u4ef7\u503c"),c.a.createElement("div",null,T(Q[f])),c.a.createElement("div",null,T(Q[d])),c.a.createElement("div",null,"\u6570\u76ee")),c.a.createElement("div",{className:"flex list-item"},c.a.createElement("div",{className:"list-item-name ellipsis"}),c.a.createElement("div",null,c.a.createElement("strong",null,o)),c.a.createElement("div",null,c.a.createElement("strong",null,i)),c.a.createElement("div",null,c.a.createElement("strong",null,u)),c.a.createElement("div",null,c.a.createElement("strong",null,s)))),c.a.createElement(ve.a,null,function(e){var t=e.height,a=e.width;return c.a.createElement(Ee.a,{height:t,width:a,itemSize:40,itemCount:n.length,itemData:r},he)}))}),je=Object(o.b)(function(e){return{state:e}},function(e){return{handleCheck:function(t,a){return e(O(t,a))},handleValues:function(t){return e(g(t))}}})(function(e){var t=e.state,a=e.handleCheck,n=e.handleValues,r=t.checked,i=t.values,u=Object(l.useReducer)(function(e,t){return Object(y.a)({},e,t)},{str:"",tor:"",def:"",air:""}),o=Object(j.a)(u,2),s=o[0],m=o[1],f=Object(l.useReducer)(function(e,t){return Object(y.a)({},e,t)},{data:{},checkList:[]}),d=Object(j.a)(f,2),E=d[0],v=d[1],b=Object(l.useState)(!1),h=Object(j.a)(b,2),g=h[0],O=h[1];Object(l.useEffect)(function(){if(g){var e=function(e,t){var a=[],n=[];return Object.keys(t).forEach(function(r,l){t[r]&&1*e[r]>0&&(a.push(1*e[r]),n.push(l))}),{sack:a,checkList:n}}(s,r),a=e.checkList;if(0!==a.length)try{setTimeout(function(){var n=function(e,t){var a=w(t),n=S(e,a),r=n.filled,l=n.reverseSack;if(!r)return{result:r,need:l};for(var c=Object.keys(a),i=c.length,u=_(Object(p.a)(l)),o=_([i].concat(Object(p.a)(l))),s=e.checkList,m=1;m<=i;m++){var f=a[c[m-1]];M(l,s,u,o,m,f)}return x(l,s,a,o),{result:!0,data:q(a)}}(e,t),r=n.result,l=n.data;r&&v({data:l,checkList:a}),O(!1)},0)}catch(n){O(!1),console.log("error")}else O(!1)}},[g]);var k=function(e){var t=e.target,a=t.name,n=t.value;m(Object(L.a)({},a,n))};return console.log(E),c.a.createElement("div",{className:"col"},c.a.createElement(ie,{values:i,handleValues:n}),c.a.createElement("div",{className:"flex"},c.a.createElement(de,{checked:r,handleCheck:a}),c.a.createElement("div",{className:"set-box"},Q.map(function(e){return r[e]?c.a.createElement(ce,{key:e,label:e,onChange:k}):null}),c.a.createElement(te.a,{variant:"contained",color:"primary",disabled:g,onClick:function(){return O(!0)}},"CALC"))),c.a.createElement("div",{className:"fill-remains"},g?c.a.createElement("img",{alt:"loading",className:"lg",src:"".concat("/warship-girl","/images/loading.svg")}):c.a.createElement(Oe,E)))}),ye=a(72),pe=a.n(ye),ke=a(43),Ce=a(142),Te=a(143),we=Object(ke.sortableHandle)(function(){return c.a.createElement(Ce.a,null)}),Ie=Object(o.b)(function(e){return{stats:e.stats}})(Object(ke.sortableElement)(function(e){var t=e.data,a=e.index,n=e.style,r=e.stats,l=t.dragable,i=t.list,u=t.openEdit,o=r[i[a]],s=o.name,m=o.weight,f=o.qty;return c.a.createElement("div",{className:"flex list-item",style:n},c.a.createElement("div",null,l?c.a.createElement(we,null):c.a.createElement(Te.a,{onClick:u(a)})),c.a.createElement("div",{className:"list-item-name ellipsis"},s),m.map(function(e,t){return c.a.createElement("div",{key:t},e||0)}),c.a.createElement("div",null,""===f?20:f))})),Se=Object(be.a)(function(e,t,a){return{dragable:e,list:t,openEdit:a}}),_e=Object(ke.sortableContainer)(function(e){var t=e.list,a=e.openEdit,n=Object(l.useState)(!1),r=Object(j.a)(n,2),i=r[0],u=r[1],o=Se(i,t,a);return c.a.createElement("div",{className:"fill-remains"},c.a.createElement("div",{className:"flex list-item",style:{height:"50px"}},c.a.createElement("div",null,c.a.createElement(fe.a,{color:"primary",checked:i,onChange:function(e){var t=e.target.checked;return u(t)},value:"dragable"})),c.a.createElement("div",{className:"list-item-name"},"NAME"),Q.map(function(e){return c.a.createElement("div",{key:e},T(e))}),c.a.createElement("div",null,T("qty"))),c.a.createElement(ve.a,null,function(e){var a=e.height,n=e.width;return c.a.createElement(Ee.a,{height:a,width:n,itemSize:40,itemCount:t.length,itemData:o},Ie)}))}),Me=Object(o.b)(function(e){return{list:e.list}},function(e){return{handleDrag:function(t){return e(h(t))}}})(function(e){var t=e.handleDrag,a=Object(K.a)(e,["handleDrag"]);return c.a.createElement(_e,Object.assign({useDragHandle:!0,onSortEnd:t},a))}),Ne=a(149),xe=a(144),qe=a(145),Ae=function(e){var t=e.id,a=e.item,n=e.open,r=e.handleClose,i=e.handleConfirm,u=e.handleDel,o={name:"",qty:"",str:"",tor:"",def:"",air:"",fuel:"",ammo:"",steel:"",al:""},s=Object(l.useReducer)(function(e,t){return Object(y.a)({},e,t)},o),m=Object(j.a)(s,2),f=m[0],d=m[1],E=function(e){var t=e.target,a=t.name,n=t.value;return d(Object(L.a)({},a,n))};return Object(l.useEffect)(function(){if(n){var e=o;if(t&&a){var r=a.name,l=a.qty,c=a.weight,i=a.value,u=Object(j.a)(c,4),s=u[0],m=u[1],f=u[2],E=u[3],v=Object(j.a)(i,4);e={name:r,qty:l,str:s,tor:m,def:f,air:E,fuel:v[0],ammo:v[1],steel:v[2],al:v[3]}}d(e)}},[n]),c.a.createElement(Ne.a,{open:n,maxWidth:"sm"},c.a.createElement("form",{autoComplete:"off"},c.a.createElement(xe.a,{classes:{root:"wrap-box dialog-content"}},c.a.createElement("div",{className:"fluid"},c.a.createElement(le.a,{required:!0,variant:"filled",label:"Name",value:f.name,InputProps:{name:"name"},onChange:E}),c.a.createElement(ce,{label:"qty",value:f.qty,onChange:E})),["str","tor","def","air","fuel","ammo","steel","al"].map(function(e){return c.a.createElement(ce,{key:e,label:e,value:f[e],onChange:E})})),c.a.createElement(qe.a,null,t&&c.a.createElement(te.a,{color:"secondary",tabIndex:"-1",onClick:u},c.a.createElement("strong",null,"\u5220\u9664")),c.a.createElement(te.a,{color:"secondary",tabIndex:"-1",onClick:r},"\u53d6\u6d88"),c.a.createElement(te.a,{type:"submit",color:"primary",onClick:function(e){var a=f.name,n=f.qty,r=f.str,l=f.tor,c=f.def,u=f.air,o=f.fuel,s=f.ammo,m=f.steel,d=f.al;i(e,{id:t,name:a,qty:n,weight:[r,l,c,u],value:[o,s,m,d]})}},c.a.createElement("strong",null,"\u786e\u8ba4")))))},De=Object(o.b)(function(e){return{store:e}},function(e){return{handleCreate:function(t){return e(E(t))},handleRemove:function(t,a){return e(v(t,a))},handleEdit:function(t){return e(b(t))},handleReload:function(){return e(d())}}})(function(e){var t=e.store,a=e.handleReload,n=e.handleRemove,r=e.handleCreate,i=e.handleEdit,u=t.list,o=t.stats,s=Object(l.useReducer)(function(e,t){return Object(y.a)({},e,t)},{id:null,item:null,open:!1}),m=Object(j.a)(s,2),f=m[0],d=m[1],E=function(){return d({open:!1})};return c.a.createElement("div",{className:"col"},c.a.createElement(re,{btns:["load","del","save","add"],onClick:function(e){return function(){switch(e){case"load":a();break;case"del":!function(e){try{localStorage.removeItem(e)}catch(t){console.log(t)}}("warship-girl"),setTimeout(function(){return a()},0);break;case"save":!function(e,t){try{var a=JSON.stringify(t);localStorage.setItem(e,a)}catch(n){console.log(n)}}("warship-girl",t);break;case"add":d({id:null,item:null,open:!0})}}}}),c.a.createElement(Me,{openEdit:function(e){return function(){var t=u[e],a=o[t];d({id:t,index:e,item:a,open:!0})}}}),c.a.createElement(Ae,Object.assign({handleClose:E,handleConfirm:function(e,t){var a=t.id;if(t.name)if(E(),e.preventDefault(),a)i(t);else{var n=Object(y.a)({},t,{id:pe()()});r(n)}},handleDel:function(){var e=f.index,t=f.id;n(e,t),E()}},f)))});a(100);u.a.render(c.a.createElement(function(){return c.a.createElement(o.a,{store:G},c.a.createElement("main",{className:"flex"},c.a.createElement(je,null),c.a.createElement(De,null)))},null),document.getElementById("root"))},80:function(e,t,a){e.exports=a(101)}},[[80,1,2]]]);
//# sourceMappingURL=main.4903e496.chunk.js.map